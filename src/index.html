<!DOCTYPE html>
<html lang="en">
<head>
  <!--Your API key is: 8857ddfa72ae47238500738f55cc70f1-->
  <!--https://newsapi.org/v2/top-headlines?country=in&apiKey=8857ddfa72ae47238500738f55cc70f1-->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <link rel="stylesheet" href="styles/index.css"/>
 
  <title>News Aggregator</title>
</head>
<body>
  <h1 class="site-title">News Aggregator</h1>
  
  <div class="search-container">
    <form class="form-search" action="">
             <input type="text"   id="search" placeholder="Type and press enter to search..." />
             <input type="submit" id="searchbtn"  value="search" >
             <input type="submit" id="clearbtn"  value="clear"  >
        </form> 
        
        <ul id="news-articles"> 
          <li class="article">
          </li>
      </ul>  
  </div>

 

<h1 class="not-found">
</h1>

<script src="scripts/index.js"></script>
<script >
const searchFrom = document.querySelector(".form-search");
const input = document.getElementById("search");

searchFrom.addEventListener('submit',retrieve)
 

function retrieve(e){
  e.preventDefault() 
  let topic=input.value;
       let url =   `https://newsapi.org/v2/everything?q=${topic}&apiKey=8857ddfa72ae47238500738f55cc70f1`

     let output = "";

     

let makeSomeHTML = (response) => {
 let obj = JSON.parse(response);
 let dataArr = obj["articles"];   
   for (let i = 0; i < dataArr.length; i++) {
       let currObj = dataArr[i];
       let atitle = currObj["title"];
       let aauthor = currObj["author"];
       let adescription = currObj["description"];
       let aimage = currObj["urlToImage"];
       let alink = currObj["url"];
       let outTemplate = `
              <li class="article">
                   <img  class="article-img" src="${aimage}" alt="${atitle}" style="width:100%" ><br><br>
                   <h2 class="article-title"> ${atitle}</h2><br>
                   <p class="article-description">${adescription || "DEscription not available"} </p><br>
                   <span class="article-author" style="display: block;"> ${aauthor}</span><br>
                   <a class="article-link" href="${alink}">link to page </a>
             </li>    
         `;
     output = output+ outTemplate; 
 }

let select = document.querySelector('.not-found');

         if (obj.totalResults == 0 ){   
             select.innerHTML = "No article was found based on the search.";             
         }


 document.querySelector('#news-articles').innerHTML = output;
}
httpGetAsync(url, makeSomeHTML);
}




// reload
var btn = document.querySelector("#clearbtn");

btn.addEventListener("click", function(e){

    e.preventDefault();

    location.reload(true);

});
</script>
</body>
</html>
